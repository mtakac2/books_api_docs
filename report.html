<h1 id="dredd-tests">Dredd Tests</h1>
<h2 id="fail-post-books">Fail: POST /books</h2>
<h3 id="message">Message</h3>
<pre><code>headers: Value of the ‘content-type’ must be application/json.
body: No validator found for real data media type &#39;text/plain&#39; and expected data media type &#39;application/json&#39;.
statusCode: Real and expected data does not match.
</code></pre><h3 id="request">Request</h3>
<pre><code>body: 
+Body    { &quot;title&quot;: &quot;Love is just a word&quot;, &quot;author&quot;: &quot;M. M. Simmel&quot; }

headers: 
    Content-Type: application/json
    User-Agent: Dredd/0.3.1 (Linux 3.11.0-20-generic; x64)
    Content-Length: 70

uri: /books
method: POST
</code></pre><h3 id="expected">Expected</h3>
<pre><code>headers: 
    Content-Type: application/json

body: 
{
  &quot;id&quot;: &quot;3&quot;,
  &quot;title&quot;: &quot;Love is just a word&quot;,
  &quot;author&quot;: &quot;M. M. Simmel&quot;,
  &quot;created_at&quot;: &quot;2014-05-08T11:03:11.442Z&quot;,
  &quot;updated_at&quot;: &quot;2014-05-08T11:03:11.442Z&quot;
}
statusCode: 200
</code></pre><h3 id="actual">Actual</h3>
<pre><code>statusCode: 400
headers: 
    content-type: text/html; charset=utf-8
    content-length: 10286
    x-request-id: 56af262b-d7f8-4532-8b75-5b4f0b458ad2
    x-runtime: 0.015432
    server: WEBrick/1.3.1 (Ruby/2.1.1/2014-02-24)
    date: Thu, 08 May 2014 12:15:19 GMT
    connection: Keep-Alive

body: 
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot; /&gt;
  &lt;title&gt;Action Controller: Exception caught&lt;/title&gt;
  &lt;style&gt;
    body {
      background-color: #FAFAFA;
      color: #333;
      margin: 0px;
    }

    body, p, ol, ul, td {
      font-family: helvetica, verdana, arial, sans-serif;
      font-size:   13px;
      line-height: 18px;
    }

    pre {
      font-size: 11px;
      white-space: pre-wrap;
    }

    pre.box {
      border: 1px solid #EEE;
      padding: 10px;
      margin: 0px;
      width: 958px;
    }

    header {
      color: #F0F0F0;
      background: #C52F24;
      padding: 0.5em 1.5em;
    }

    h1 {
      margin: 0.2em 0;
      line-height: 1.1em;
      font-size: 2em;
    }

    h2 {
      color: #C52F24;
      line-height: 25px;
    }

    .details {
      border: 1px solid #D0D0D0;
      border-radius: 4px;
      margin: 1em 0px;
      display: block;
      width: 978px;
    }

    .summary {
      padding: 8px 15px;
      border-bottom: 1px solid #D0D0D0;
      display: block;
    }

    .details pre {
      margin: 5px;
      border: none;
    }

    #container {
      box-sizing: border-box;
      width: 100%;
      padding: 0 1.5em;
    }

    .source * {
      margin: 0px;
      padding: 0px;
    }

    .source {
      border: 1px solid #D9D9D9;
      background: #ECECEC;
      width: 978px;
    }

    .source pre {
      padding: 10px 0px;
      border: none;
    }

    .source .data {
      font-size: 80%;
      overflow: auto;
      background-color: #FFF;
    }

    .info {
      padding: 0.5em;
    }

    .source .data .line_numbers {
      background-color: #ECECEC;
      color: #AAA;
      padding: 1em .5em;
      border-right: 1px solid #DDD;
      text-align: right;
    }

    .line {
      padding-left: 10px;
    }

    .line:hover {
      background-color: #F6F6F6;
    }

    .line.active {
      background-color: #FFCCCC;
    }

    a { color: #980905; }
    a:visited { color: #666; }
    a:hover { color: #C52F24; }


  &lt;/style&gt;

  &lt;script&gt;
    var toggle = function(id) {
      var s = document.getElementById(id).style;
      s.display = s.display == &#39;none&#39; ? &#39;block&#39; : &#39;none&#39;;
      return false;
    }
    var show = function(id) {
      document.getElementById(id).style.display = &#39;block&#39;;
    }
    var hide = function(id) {
      document.getElementById(id).style.display = &#39;none&#39;;
    }
    var toggleTrace = function() {
      return toggle(&#39;blame_trace&#39;);
    }
    var toggleSessionDump = function() {
      return toggle(&#39;session_dump&#39;);
    }
    var toggleEnvDump = function() {
      return toggle(&#39;env_dump&#39;);
    }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;header&gt;
  &lt;h1&gt;
    ActionDispatch::ParamsParser::ParseError
  &lt;/h1&gt;
&lt;/header&gt;

&lt;div id=&quot;container&quot;&gt;
  &lt;h2&gt;795: unexpected token at &amp;#39;+Body    { &amp;quot;title&amp;quot;: &amp;quot;Love is just a word&amp;quot;, &amp;quot;author&amp;quot;: &amp;quot;M. M. Simmel&amp;quot; }
&amp;#39;&lt;/h2&gt;



&lt;p&gt;&lt;code&gt;Rails.root: /home/mtakac/tutorials/books_api&lt;/code&gt;&lt;/p&gt;

&lt;div id=&quot;traces&quot;&gt;
    &lt;a href=&quot;#&quot; onclick=&quot;hide(&amp;#39;Framework-Trace&amp;#39;);hide(&amp;#39;Full-Trace&amp;#39;);show(&amp;#39;Application-Trace&amp;#39;);; return false;&quot;&gt;Application Trace&lt;/a&gt; |
    &lt;a href=&quot;#&quot; onclick=&quot;hide(&amp;#39;Application-Trace&amp;#39;);hide(&amp;#39;Full-Trace&amp;#39;);show(&amp;#39;Framework-Trace&amp;#39;);; return false;&quot;&gt;Framework Trace&lt;/a&gt; |
    &lt;a href=&quot;#&quot; onclick=&quot;hide(&amp;#39;Application-Trace&amp;#39;);hide(&amp;#39;Framework-Trace&amp;#39;);show(&amp;#39;Full-Trace&amp;#39;);; return false;&quot;&gt;Full Trace&lt;/a&gt; 

    &lt;div id=&quot;Application-Trace&quot; style=&quot;display: block;&quot;&gt;
      &lt;pre&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;div id=&quot;Framework-Trace&quot; style=&quot;display: none;&quot;&gt;
      &lt;pre&gt;&lt;code&gt;actionpack (4.1.1) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/params_parser.rb:23:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/flash.rb:254:in `call&amp;#39;
rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context&amp;#39;
rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/cookies.rb:560:in `call&amp;#39;
activerecord (4.1.1) lib/active_record/query_cache.rb:36:in `call&amp;#39;
activerecord (4.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call&amp;#39;
activerecord (4.1.1) lib/active_record/migration.rb:380:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call&amp;#39;
activesupport (4.1.1) lib/active_support/callbacks.rb:82:in `run_callbacks&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/reloader.rb:73:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call&amp;#39;
railties (4.1.1) lib/rails/rack/logger.rb:38:in `call_app&amp;#39;
railties (4.1.1) lib/rails/rack/logger.rb:20:in `block in call&amp;#39;
activesupport (4.1.1) lib/active_support/tagged_logging.rb:68:in `block in tagged&amp;#39;
activesupport (4.1.1) lib/active_support/tagged_logging.rb:26:in `tagged&amp;#39;
activesupport (4.1.1) lib/active_support/tagged_logging.rb:68:in `tagged&amp;#39;
railties (4.1.1) lib/rails/rack/logger.rb:20:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/request_id.rb:21:in `call&amp;#39;
rack (1.5.2) lib/rack/methodoverride.rb:21:in `call&amp;#39;
rack (1.5.2) lib/rack/runtime.rb:17:in `call&amp;#39;
activesupport (4.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call&amp;#39;
rack (1.5.2) lib/rack/lock.rb:17:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/static.rb:64:in `call&amp;#39;
rack (1.5.2) lib/rack/sendfile.rb:112:in `call&amp;#39;
railties (4.1.1) lib/rails/engine.rb:514:in `call&amp;#39;
railties (4.1.1) lib/rails/application.rb:144:in `call&amp;#39;
rack (1.5.2) lib/rack/lock.rb:17:in `call&amp;#39;
rack (1.5.2) lib/rack/content_length.rb:14:in `call&amp;#39;
rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service&amp;#39;
/home/mtakac/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service&amp;#39;
/home/mtakac/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run&amp;#39;
/home/mtakac/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread&amp;#39;&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;div id=&quot;Full-Trace&quot; style=&quot;display: none;&quot;&gt;
      &lt;pre&gt;&lt;code&gt;actionpack (4.1.1) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/params_parser.rb:23:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/flash.rb:254:in `call&amp;#39;
rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context&amp;#39;
rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/cookies.rb:560:in `call&amp;#39;
activerecord (4.1.1) lib/active_record/query_cache.rb:36:in `call&amp;#39;
activerecord (4.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call&amp;#39;
activerecord (4.1.1) lib/active_record/migration.rb:380:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call&amp;#39;
activesupport (4.1.1) lib/active_support/callbacks.rb:82:in `run_callbacks&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/reloader.rb:73:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call&amp;#39;
railties (4.1.1) lib/rails/rack/logger.rb:38:in `call_app&amp;#39;
railties (4.1.1) lib/rails/rack/logger.rb:20:in `block in call&amp;#39;
activesupport (4.1.1) lib/active_support/tagged_logging.rb:68:in `block in tagged&amp;#39;
activesupport (4.1.1) lib/active_support/tagged_logging.rb:26:in `tagged&amp;#39;
activesupport (4.1.1) lib/active_support/tagged_logging.rb:68:in `tagged&amp;#39;
railties (4.1.1) lib/rails/rack/logger.rb:20:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/request_id.rb:21:in `call&amp;#39;
rack (1.5.2) lib/rack/methodoverride.rb:21:in `call&amp;#39;
rack (1.5.2) lib/rack/runtime.rb:17:in `call&amp;#39;
activesupport (4.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call&amp;#39;
rack (1.5.2) lib/rack/lock.rb:17:in `call&amp;#39;
actionpack (4.1.1) lib/action_dispatch/middleware/static.rb:64:in `call&amp;#39;
rack (1.5.2) lib/rack/sendfile.rb:112:in `call&amp;#39;
railties (4.1.1) lib/rails/engine.rb:514:in `call&amp;#39;
railties (4.1.1) lib/rails/application.rb:144:in `call&amp;#39;
rack (1.5.2) lib/rack/lock.rb:17:in `call&amp;#39;
rack (1.5.2) lib/rack/content_length.rb:14:in `call&amp;#39;
rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service&amp;#39;
/home/mtakac/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service&amp;#39;
/home/mtakac/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run&amp;#39;
/home/mtakac/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread&amp;#39;&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;



&lt;h2 style=&quot;margin-top: 30px&quot;&gt;Request&lt;/h2&gt;
&lt;p&gt;&lt;b&gt;Parameters&lt;/b&gt;:&lt;/p&gt; &lt;pre&gt;None&lt;/pre&gt;

&lt;div class=&quot;details&quot;&gt;
  &lt;div class=&quot;summary&quot;&gt;&lt;a href=&quot;#&quot; onclick=&quot;return toggleSessionDump()&quot;&gt;Toggle session dump&lt;/a&gt;&lt;/div&gt;
  &lt;div id=&quot;session_dump&quot; style=&quot;display:none&quot;&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;details&quot;&gt;
  &lt;div class=&quot;summary&quot;&gt;&lt;a href=&quot;#&quot; onclick=&quot;return toggleEnvDump()&quot;&gt;Toggle env dump&lt;/a&gt;&lt;/div&gt;
  &lt;div id=&quot;env_dump&quot; style=&quot;display:none&quot;&gt;&lt;pre&gt;GATEWAY_INTERFACE: &amp;quot;CGI/1.1&amp;quot;
REMOTE_ADDR: &amp;quot;127.0.0.1&amp;quot;
REMOTE_HOST: &amp;quot;127.0.0.1&amp;quot;
SERVER_NAME: &amp;quot;localhost&amp;quot;
SERVER_PROTOCOL: &amp;quot;HTTP/1.1&amp;quot;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;h2 style=&quot;margin-top: 30px&quot;&gt;Response&lt;/h2&gt;
&lt;p&gt;&lt;b&gt;Headers&lt;/b&gt;:&lt;/p&gt; &lt;pre&gt;None&lt;/pre&gt;

&lt;/div&gt;


&lt;/body&gt;
&lt;/html&gt;
</code></pre>